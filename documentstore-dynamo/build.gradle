repositories {
  maven {
    url "https://s3-us-west-2.amazonaws.com/dynamodb-local/release/"
  }
}


configurations {
   sqliteNative { transitive = false }
}

dependencies {
  implementation project(':documentstore-dsl'),
                 "org.sanoitus:sanoitus-util_${gradle.scalaVersion}:0.1.3",
                 'software.amazon.awssdk:dynamodb:2.16.23'


  testImplementation project(':documentstore-test'),
                     'com.amazonaws:DynamoDBLocal:1.15.0'

  testRuntimeOnly 'org.slf4j:slf4j-simple:1.7.28'

  sqliteNative 'com.almworks.sqlite4java:libsqlite4java-linux-i386:1.0.392',
               'com.almworks.sqlite4java:libsqlite4java-linux-amd64:1.0.392',
               'com.almworks.sqlite4java:sqlite4java-win32-x64:1.0.392',
               'com.almworks.sqlite4java:sqlite4java-win32-x86:1.0.392',
               'com.almworks.sqlite4java:libsqlite4java-osx:1.0.392'
}

task copyNativeLibsToResources(type: Copy, dependsOn: configurations.sqliteNative) {
   from configurations.sqliteNative
   into "src/test/resources/libs"
}


test.dependsOn copyNativeLibsToResources
